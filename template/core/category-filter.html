{% load static %}

<!DOCTYPE html>
<html lang="en">


<!-- molla/category-4cols.html  22 Nov 2019 10:02:52 GMT -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Molla - Bootstrap eCommerce Template</title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Molla - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'assets/images/cycular/favicon-cycular-user.ico' %}">
   
    <link rel="mask-icon" href="assets/images/icons/safari-pinned-tab.svg" color="#666666">
    <link rel="shortcut icon" href="assets/images/icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="Molla">
    <meta name="application-name" content="Molla">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="msapplication-config" content="assets/images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
   
   <!-- Plugins CSS File -->
   <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
   <link rel="stylesheet" href="{% static 'assets/css/plugins/owl-carousel/owl.carousel.css' %}">
   <link rel="stylesheet" href="{% static 'assets/css/plugins/magnific-popup/magnific-popup.css' %}">
   <!-- Main CSS File -->
   <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
   <link rel="stylesheet" href="{% static 'assets/css/plugins/nouislider/nouislider.css' %}">
   <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
   <link rel="stylesheet" href="{% static 'assets/css/skins/skin-demo-20.css' %}">
   <link rel="stylesheet" href="{% static 'assets/css/demos/demo-20.css' %}">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
   







   
   <style>
    .slider-container {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    input[type="range"] {
        width: 100%;
        background: #ddd;
        height: 5px;
        border-radius: 5px;
    }
    
    input[type="range"]::-webkit-slider-thumb {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background: #007bff;
        cursor: pointer;
        /* For webkit browsers */
    }
    
    input[type="range"]::-moz-range-thumb {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background: #007bff;
        cursor: pointer;
        /* For Firefox */
    }

    
    /* for wishlist down below */


    </style>
    
    


</head>

<body>
    <div class="page-wrapper">
       
        <header class="header header-12">
            <div class="header-top">
                <div class="container">
                   

                    <div class="header-right">

                        {% if user.is_authenticated %}
                            <ul style="margin-top: 10px;">
                                <a href="{% url 'user_side:sign-out' %}" >Log-out</a>
                            </ul>
                        {% endif %}
                    </div><!-- End .header-right -->

                </div><!-- End .container -->
            </div><!-- End .header-top -->

        <div class="header-middle">
            <div class="container">
                <div class="header-left">
                 
                    <a href="{% url 'core:index'%}" class="logo">
                        <img src="{% static 'assets\images\cycular\cycular_mix.png' %}" alt="Molla Logo" width="105" height="25">
                    </a>
                </div><!-- End .header-left -->

                <div class="header-right">           
                    {% if user.is_authenticated %}
                    <div class="header-dropdown-link">
                        <div class="account">
                            <a href="{% url 'user_side:user-dash-board' %}" title="My account">
                                <div class="icon">
                                    <i class="icon-user"></i>
                                </div>
                                <p> My Account</p>
                            </a>
                        </div><!-- End .compare-dropdown -->
                    {% else %}
                    <div class="header-dropdown-link">
                        <div class="account">
                            <a href="{% url 'user_side:sign-in' %}" title="My account">
                                <div class="icon">
                                    <i class="icon-user"></i>
                                </div>
                                <p>login/signup</p>
                            </a>
                        </div><!-- End .compare-dropdown -->
                    {% endif %}

                        <div class="wishlist">
                            <a href="{% url 'wishlist:wishlist-page' %}" title="Wishlist">
                                <div class="icon">
                                    <i class="icon-heart-o"></i>
                                    <span class="wishlist-count badge">0</span>
                                </div>
                                <p>Wishlist</p>
                            </a>
                        </div><!-- End .compare-dropdown -->

                        <div class="dropdown cart-dropdown">
                            <a href="{% url 'cart:cart-page' %}" class="dropdown-toggle" ">
                                <div class="icon">
                                    <i class="icon-shopping-cart"></i>
                                    <span class="cart-count">0</span>
                                </div>
                                <p>Cart</p>
                            </a>

                        </div><!-- End .cart-dropdown -->
                    </div>
                </div><!-- End .header-right -->




            </div><!-- End .container -->
        </div><!-- End .header-middle -->






    </header><!-- End .header -->

        
        <main class="main">
        	<div class="page-header text-center" style="background-image: url({% static 'assets/images/page-header-bg.jpg'%})">
        		<div class="container">
        			<h1 class="page-title">Select Your Bike<span>Shop</span></h1>
        		</div><!-- End .container -->
        	</div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{% url 'core:index' %}">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Select Your Bike</li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->


            <div class="page-content">
                <div class="container">
                	<div class="row">
                		<div class="col-lg-9">
                            
                			<div class="toolbox">
                				<div class="toolbox-left">
                					<div class="toolbox-info">
                						Showing <span>{{ product_variant_counts }} of {{ product_variant_counts }}</span> Products
                					</div><!-- End .toolbox-info -->
                				</div><!-- End .toolbox-left -->

                				<div class="toolbox-right">
                					<div class="toolbox-sort">
                						<label for="sortby">Sort by:</label>
                						<div class="select-custom">
											<!-- Sorting Dropdown -->
                                            <form method="GET" action="{% url 'core:category-filter' %}">
                                                <input type="hidden" name="brands" value="{{ request.GET.brands|join:',' }}">
                                                <input type="hidden" name="categories" value="{{ request.GET.categories|join:',' }}">
                                                <input type="hidden" name="sizes" value="{{ request.GET.sizes|join:',' }}">
                                                <input type="hidden" name="min_price" value="{{ request.GET.min_price }}">
                                                <input type="hidden" name="max_price" value="{{ request.GET.max_price }}">
                                                
                                                <select name="sortby" id="sortby" class="form-control" onchange="this.form.submit()">
                                                    <option value="default">Sort By</option>
                                                    <option value="increase" {% if sort_by == 'increase' %}selected{% endif %}>Price : Low to High</option>
                                                    <option value="decrease" {% if sort_by == 'decrease' %}selected{% endif %}>Price : High to Low</option>
                                                    <option value="new" {% if sort_by == 'new' %}selected{% endif %}>New Arrivals</option>
                                                    <option value="alpha-increase" {% if sort_by == 'alpha-increase' %}selected{% endif %}>aA - zZ</option>
                                                    <option value="alpha-decrease" {% if sort_by == 'alpha-decrease' %}selected{% endif %}>zZ - aA</option>
                                                </select>
                                            </form>
										</div>
                					</div><!-- End .toolbox-sort -->
                				</div><!-- End .toolbox-right -->
                			</div><!-- End .toolbox -->

                            <!-- product show  -->


                            <!-- search bar -->
                            <form id="price-filter-form" method="get" action="{% url 'core:category-filter' %}">
                                <div class="input-group mb-3">
                                    <input type="text" name="search" class="form-control" placeholder="Search products..." aria-label="Search" value="{{ search_query }}">
                                    <div class="input-group-append">
                                        <button class="btn btn-primary" type="submit">Search</button>
                                    </div>
                                </div>
                                <!-- Existing filters and buttons -->
                            </form>
                 



                            <div class="products mb-3">
                               
                                <div class="row">
                                   

                                    {% for product_variant in product_variants %}
                                    <div class="col-6 col-md-4 col-lg-4 col-xl-3">
                                        <div class="product product-7 text-center">
                                            {% if product_variant.get_discount_percentage != 0 %}
                                            <span class="product-label label-sale" style="background-color:#1cc0a0"><b> Discount of {{product_variant.get_discount_percentage}}%</b></span>
                                            {% endif %}
                                            <figure class="product-media">
                                                <a href="{% url 'products:single-product-view' product_variant.id %}">
                                                    <img src="{{ product_variant.image1.url}}" alt="Product image" class="product-image">
                                                </a>

                                                <div class="product-action-vertical ">
                                                    <!-- Wishlist Button -->
                                                    {% if product_variant.id in user_wishlsit_ids %}
                                                    <a type="button" class="btn-product btn-wishlist wishlist-button" href="{% url 'wishlist:wishlist-page' %}" ><span>Go to Wishlist</span></a>                       
                                                    {% else %}
                                                    <button type="button" class="btn-product btn-wishlist wishlist-button add-to-wishlist" data-product-item="{{ product_variant.id }}" style="font-size:15px ;"><span>Add to Wishlist</span></button>                       
                                                    {% endif %}
                                                    
                                                </div><!-- End .product-action-vertical -->
                                                <div class="product-action">
                                                    <button class="btn-product btn-cart" data-product-id="{{ product_variant.id }}" onclick="addToCart(this)">Add to Cart</button>
                                                </div>
                                            </figure><!-- End .product-media -->

                                            <div class="product-body">
                                                <div class="product-cat">

                                                    {% if product_variant.stock == 0 %}
                                                    <p class="text-danger"><b>out of stock</b></p>
                                                    {% elif product_variant.stock < 5 %}
                                                    <p><b>stock : {{product_variant.stock}} left </b></p>
                                                    {% endif %}
                                                    <p>{{product_variant.product.category}},{{product_variant.size}},{{product_variant.product.brand}}</p>
                                                   
                                                </div><!-- End .product-cat -->
                                                <h3 class="product-title"><a href="{% url 'products:single-product-view' product_variant.id %}">{{product_variant.product.name}}</a></h3><!-- End .product-title -->
                                                <div class="product-price">
                                                    ₹ {{product_variant.price}}
                                                </div><!-- End .product-price -->
                                                <div class="ratings-container">
                                                    <div class="ratings">
                                                        <div class="ratings-val" style="width: 0%;"></div><!-- End .ratings-val -->
                                                    </div><!-- End .ratings -->
                                                    <span class="ratings-text">( 0 Reviews )</span>
                                                </div><!-- End .rating-container -->

                                                <div class="product-nav product-nav-thumbs">
                                                    <a class="active">
                                                        <img src="{{ product_variant.image1.url}}" alt="product desc">
                                                    </a>
                                                    <a >
                                                        <img src="{{ product_variant.image2.url }}" alt="product desc">
                                                    </a>
                                                    <a>
                                                        <img src="{{ product_variant.image3.url }}" alt="product desc">
                                                    </a>
                                                    
                                                </div><!-- End .product-nav -->
                                            </div><!-- End .product-body -->
                                        </div><!-- End .product -->
                                    </div><!-- End .col-sm-6 col-lg-4 col-xl-3 -->

                                    {% endfor %}

                                </div><!-- End .row -->
                            </div><!-- End .products -->



                            

                			<!-- Pagination Navigation -->
                            <nav aria-label="Page navigation">
                                <ul class="pagination justify-content-center">
                                    <!-- Previous Page Link -->
                                    {% if product_variants.has_previous %}
                                    <li class="page-item">
                                        <a class="page-link page-link-prev" href="?page={{ product_variants.previous_page_number }}" aria-label="Previous">
                                            <span aria-hidden="true"><i class="icon-long-arrow-left"></i></span> Prev
                                        </a>
                                    </li>
                                    {% else %}
                                    <li class="page-item disabled">
                                        <a class="page-link page-link-prev" href="#" aria-label="Previous" tabindex="-1" aria-disabled="true">
                                            <span aria-hidden="true"><i class="icon-long-arrow-left"></i></span> Prev
                                        </a>
                                    </li>
                                    {% endif %}

                                    <!-- Page Numbers -->
                                    {% for num in product_variants.paginator.page_range %}
                                    <li class="page-item {% if product_variants.number == num %}active{% endif %}">
                                        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                                    </li>
                                    {% endfor %}

                                    <!-- Next Page Link -->
                                    {% if product_variants.has_next %}
                                    <li class="page-item">
                                        <a class="page-link page-link-next" href="?page={{ product_variants.next_page_number }}" aria-label="Next">
                                            Next <span aria-hidden="true"><i class="icon-long-arrow-right"></i></span>
                                        </a>
                                    </li>
                                    {% else %}
                                    <li class="page-item disabled">
                                        <a class="page-link page-link-next" href="#" aria-label="Next">
                                            Next <span aria-hidden="true"><i class="icon-long-arrow-right"></i></span>
                                        </a>
                                    </li>
                                    {% endif %}
                                </ul>
                            </nav>
                		</div><!-- End .col-lg-9 -->



                		<aside class="col-lg-3 order-lg-first">

                                <div class="sidebar sidebar-shop">
                                    <div class="widget widget-clean">
                                        <label>Filters:</label>
                                        <a href="#" id="clean-all-button" class="sidebar-filter-clear"><i class="fa fa-refresh" aria-hidden="true"></i> Clean All</a>
                                    </div><!-- End .widget widget-clean -->
                                
                                    <div class="widget widget-collapsible">
                                        <!-- Corrected Form Tag -->
                                        <form method="get" action="{% url 'core:category-filter' %}">

                                             <!-- Hidden fields to preserve existing query parameters -->
                                            <input type="hidden" name="sizes" value="{{ request.GET.sizes|join:',' }}">
                                            <input type="hidden" name="brands" value="{{ request.GET.brands|join:',' }}">
                                            <input type="hidden" name="min_price" value="{{ request.GET.min_price }}">
                                            <input type="hidden" name="max_price" value="{{ request.GET.max_price }}">
                                            <input type="hidden" name="sortby" id="sortby-hidden" value="{{ request.GET.sortby }}">
                                            <h3 class="widget-title">
                                                <a data-toggle="collapse" href="#widget-1" role="button" aria-expanded="true" aria-controls="widget-1">
                                                    Category
                                                </a>
                                            </h3><!-- End .widget-title -->
                                
                                            <div class="collapse show" id="widget-1">
                                                <div class="widget-body">
                                                    <div class="filter-items filter-items-count">
                                                        {% for category in categories %}
                                                        <div class="filter-item">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input category-checkbox" id="cat-{{ category.id }}" name="categories" value="{{ category.id }}" {% if category.id|stringformat:"s" in selected_categories %}checked{% endif %}>
                                                                <label class="custom-control-label" for="cat-{{ category.id }}">{{ category.name }}</label>
                                                            </div><!-- End .custom-checkbox -->
                                                            <span class="item-count">{{ category.product_variant_count }}</span>
                                                        </div><!-- End .filter-item -->
                                                        {% endfor %}
                                                    </div><!-- End .filter-items -->
                                                </div><!-- End .widget-body -->
                                            </div><!-- End .collapse -->
                                            <button type="submit" class="btn btn-primary">Filter Category</button>
                                        </form>
                                    </div><!-- End .widget -->

        						<!-- Brand Filter -->
                                <div class="widget widget-collapsible">
                                   
                                    <form method="get" action="{% url 'core:category-filter' %}">
                                    <!-- Hidden fields to preserve existing query parameters -->
                                    <input type="hidden" name="categories" value="{{ request.GET.categories|join:',' }}">
                                    <input type="hidden" name="sizes" value="{{ request.GET.sizes|join:',' }}">
                                    <input type="hidden" name="min_price" value="{{ request.GET.min_price }}">
                                    <input type="hidden" name="max_price" value="{{ request.GET.max_price }}">
                                    <input type="hidden" name="sortby" id="sortby-hidden" value="{{ request.GET.sortby }}">

                                        <h3 class="widget-title">
                                            <a data-toggle="collapse" href="#widget-3" role="button" aria-expanded="true" aria-controls="widget-3">
                                                Brand
                                            </a>
                                        </h3><!-- End .widget-title -->

                                        <div class="collapse show" id="widget-3">
                                            <div class="widget-body">
                                                <div class="filter-items">
                                                    {% for brand in brands %}
                                                    <div class="filter-item">
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" id="brand-{{brand.id}}" name="brands" value="{{ brand.id }}" {% if brand.id|stringformat:"s" in selected_brands %}checked{% endif %}>
                                                            <label class="custom-control-label" for="brand-{{brand.id}}">{{brand.name}}</label>
                                                        </div><!-- End .custom-checkbox -->
                                                    </div><!-- End .filter-item -->
                                                    {% endfor %}
                                                </div><!-- End .filter-items -->
                                            </div><!-- End .widget-body -->
                                        </div><!-- End .collapse -->

                                        <!-- Submit Button -->
                                        <button type="submit" class="btn btn-primary">Filter Brand</button>
                                    </form><!-- Ensure form closes here -->
                                </div><!-- End .widget -->


                                
                                <!-- Size Filter -->
                                <div class="widget widget-collapsible">
                                    <!-- Correct placement of the form opening tag -->
                                    <form method="get" action="{% url 'core:category-filter' %}">
                                         <!-- Hidden fields to preserve existing query parameters -->
                                        <input type="hidden" name="categories" value="{{ request.GET.categories|join:',' }}">
                                        <input type="hidden" name="brands" value="{{ request.GET.brands|join:',' }}">
                                        <input type="hidden" name="min_price" value="{{ request.GET.min_price }}">
                                        <input type="hidden" name="max_price" value="{{ request.GET.max_price }}">
                                        <input type="hidden" name="sortby" id="sortby-hidden" value="{{ request.GET.sortby }}">
                                        <h3 class="widget-title">
                                            <a data-toggle="collapse" href="#widget-2" role="button" aria-expanded="true" aria-controls="widget-2">
                                                Size
                                            </a>
                                        </h3><!-- End .widget-title -->

                                        <div class="collapse show" id="widget-2">
                                            <div class="widget-body">
                                                <div class="filter-items">
                                                    {% for size in sizes %}
                                                    <div class="filter-item">
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" id="size-{{ size.id }}" name="sizes" value="{{ size.id }}" {% if size.id|stringformat:"s" in selected_sizes %}checked{% endif %}>
                                                            <label class="custom-control-label" for="size-{{ size.id }}">{{ size }}</label>
                                                        </div><!-- End .custom-checkbox -->
                                                    </div><!-- End .filter-item -->
                                                    {% endfor %}
                                                </div><!-- End .filter-items -->
                                            </div><!-- End .widget-body -->
                                        </div><!-- End .collapse -->
                                        
                                        <!-- Submit Button -->
                                        <button type="submit" class="btn btn-primary">Filter Size</button>
                                    </form><!-- Ensure form closes here -->
                                </div><!-- End .widget -->

                                <!-- Color Filter -->
                                <div class="widget widget-collapsible">
                                    <!-- Correct placement of the form opening tag -->
                                    <form method="get" action="{% url 'core:category-filter' %}">
                                        <!-- Hidden fields to preserve existing query parameters -->
                                        <input type="hidden" name="categories" value="{{ request.GET.categories|join:',' }}">
                                        <input type="hidden" name="brands" value="{{ request.GET.brands|join:',' }}">
                                        <input type="hidden" name="sizes" value="{{ request.GET.sizes|join:',' }}">
                                        <input type="hidden" name="min_price" value="{{ request.GET.min_price }}">
                                        <input type="hidden" name="max_price" value="{{ request.GET.max_price }}">
                                        <input type="hidden" name="sortby" id="sortby-hidden" value="{{ request.GET.sortby }}">

                                        <!-- Color Filter Section -->
                                        <h3 class="widget-title">
                                            <a data-toggle="collapse" href="#widget-3" role="button" aria-expanded="true" aria-controls="widget-3">
                                                Color
                                            </a>
                                        </h3><!-- End .widget-title -->

                                        <div class="collapse show" id="widget-3">
                                            <div class="widget-body">
                                                <div class="filter-items">
                                                    {% for color in colors %}
                                                    <div class="filter-item">
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" id="color-{{ color.id }}" name="colors" value="{{ color.id }}" {% if color.id|stringformat:"s" in selected_colors %}checked{% endif %}>
                                                            <label class="custom-control-label" for="color-{{ color.id }}">{{ color.name }}</label>
                                                        </div><!-- End .custom-checkbox -->
                                                    </div><!-- End .filter-item -->
                                                    {% endfor %}
                                                </div><!-- End .filter-items -->
                                            </div><!-- End .widget-body -->
                                        </div><!-- End .collapse -->

                                        <!-- Submit Button -->
                                        <button type="submit" class="btn btn-primary">Filter Colors</button>
                                    </form><!-- Ensure form closes here -->
                                </div><!-- End .widget -->


                                <!-- Price filter -->
                                <div class="widget widget-collapsible">
                                    <h3 class="widget-title">
                                        <a data-toggle="collapse" href="#price-widget" role="button" aria-expanded="true" aria-controls="price-widget">
                                            Price
                                        </a>
                                    </h3><!-- End .widget-title -->

                                    <div class="collapse show" id="price-widget">
                                        <div class="widget-body">
                                            <form id="price-filter-form" method="get" action="{% url 'core:category-filter' %}">
                                                 <!-- Hidden fields to preserve existing query parameters -->
                                                <input type="hidden" name="categories" value="{{ request.GET.categories|join:',' }}">
                                                <input type="hidden" name="sizes" value="{{ request.GET.sizes|join:',' }}">
                                                <input type="hidden" name="brands" value="{{ request.GET.brands|join:',' }}">
                                                <input type="hidden" name="sortby" id="sortby-hidden" value="{{ request.GET.sortby }}">
                                                <div class="price-filter">
                                                    <div class="price-filter-text">
                                                        Price Range: <span id="price-range-display"></span>
                                                    </div><!-- End .price-filter-text -->

                                                    <div id="price-range-slider" class="slider-container"></div><!-- End .slider-container -->

                                                    <!-- Hidden fields for min and max price -->
                                                    <input type="hidden" name="min_price" id="hidden-min-price">
                                                    <input type="hidden" name="max_price" id="hidden-max-price">

                                                    <button type="submit" class="btn btn-primary mt-5"> Filter Price </button>
                                                </div><!-- End .price-filter -->
                                            </form><!-- End form -->
                                        </div><!-- End .widget-body -->
                                    </div><!-- End .collapse -->
                                </div><!-- End .widget -->


                                <script>
                                    document.addEventListener('DOMContentLoaded', function() {
                                        var slider = document.getElementById('price-range-slider');
                                        var priceRangeText = document.getElementById('price-range-display');
                                        var minPriceInput = document.getElementById('hidden-min-price');
                                        var maxPriceInput = document.getElementById('hidden-max-price');
                                        var form = document.getElementById('price-filter-form');
    
                                        // Global fixed min and max range for the slider
                                        var globalMinPrice = parseFloat('{{ price_range.min_price|default:"4998.00" }}');
                                        var globalMaxPrice = parseFloat('{{ price_range.max_price|default:"20000.00" }}');
    
                                        // Initialize the slider with global min and max prices
                                        noUiSlider.create(slider, {
                                            start: [globalMinPrice, globalMaxPrice],
                                            connect: true,
                                            range: {
                                                'min': globalMinPrice,
                                                'max': globalMaxPrice,
                                            },
                                            step: 800,
                                            tooltips: true
                                        });
    
                                        // Update display and hidden fields when the slider value changes
                                        slider.noUiSlider.on('update', function(values) {
                                            var minValue = parseFloat(values[0]);
                                            var maxValue = parseFloat(values[1]);
                                            priceRangeText.textContent = '₹' + minValue.toFixed(2) + ' - ₹' + maxValue.toFixed(2);
    
                                            // Update hidden fields with current slider values
                                            minPriceInput.value = minValue.toFixed(2);
                                            maxPriceInput.value = maxValue.toFixed(2);
                                        });
    
                                        // Set the current range based on the URL parameters or defaults
                                        var urlParams = new URLSearchParams(window.location.search);
                                        var urlMinPrice = parseFloat(urlParams.get('min_price')) || globalMinPrice;
                                        var urlMaxPrice = parseFloat(urlParams.get('max_price')) || globalMaxPrice;
    
                                        // Ensure slider always shows global min and max as range but sets the handles to the filtered range
                                        slider.noUiSlider.set([Math.max(globalMinPrice, urlMinPrice), Math.min(globalMaxPrice, urlMaxPrice)]);
    
                                        // Initial update
                                        priceRangeText.textContent = '₹' + urlMinPrice.toFixed(2) + ' - ₹' + urlMaxPrice.toFixed(2);
    
                                        // Set initial hidden field values
                                        minPriceInput.value = urlMinPrice.toFixed(2);
                                        maxPriceInput.value = urlMaxPrice.toFixed(2);
                                    });
                                    </script>
    



                             

                			</div><!-- End .sidebar sidebar-shop -->
                		</aside><!-- End .col-lg-3 -->
                	</div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->
        
<footer class="footer footer-2">
    <div class="footer-middle">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-lg-6 col-xl-5">
                    <div class="widget widget-about">
                        <div class="logo-and-description">
                            <div class="row align-items-center">
                                <div class="col-md-4 ">
                                    
                                    <a href="{% url 'core:index' %}" class="logo">
                                        <img src="{% static 'assets/images/cycular/cycular_black.png' %}" alt="Cycular logo" class="img-fluid" width="105" height="25">
                                    </a>
                                
                                </div>
                                <div class="col-md-8">
                                    <!-- Used text-start to align the text to the left and reduced column width -->
                                    <p class="mt-md-0 text-start">
                                       © 2024 Cycular. All rights reserved. Discover high-quality bicycles for every adventure, and join our community of cycling enthusiasts today!
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div class="widget-about-info ">
                            <div class="row">
                                <div class="col-sm-6 col-md-4">
                                    <span class="widget-about-title">Got Question? Call us 24/7</span>
                                    <a href="tel:123456789">+0123 456 789</a>
                                </div>
                                <div class="col-sm-6 col-md-8">
                                    <span class="widget-about-title">Payment Method</span>
                                    Razor Pay
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
    
    
                <div class="col-lg-6 col-xl-7">
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="widget">
                                <h4 class="widget-title">Information</h4><!-- End .widget-title -->
    
                                <ul class="widget-list">
                                    <li><a href="about.html">About Cycular</a></li>
                                    <li><a href="#">How to shop on Cycular</a></li>
                                    <li><a href="faq.html">FAQ</a></li>
                                    <li><a href="contact.html">Contact us</a></li>
                                    <li><a href="login.html">Log in</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-4 col-lg-3 -->
    
                        <div class="col-sm-4">
                            <div class="widget">
                                <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->
    
                                <ul class="widget-list">
                                    <li><a href="#">Payment Methods</a></li>
                                    <li><a href="#">Money-back guarantee!</a></li>
                                    <li><a href="#">Returns</a></li>
                                    <li><a href="#">Shipping</a></li>
                                    <li><a href="#">Terms and conditions</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-4 col-lg-3 -->
    
                        <div class="col-sm-4">
                            <div class="widget">
                                <h4 class="widget-title">My Account</h4><!-- End .widget-title -->
    
                                <ul class="widget-list">
                                    <li><a href="login.html">Sign In</a></li>
                                    <li><a href="cart.html">View Cart</a></li>
                                    <li><a href="wishlist.html">My Wishlist</a></li>
                                    <li><a href="#">Track My Order</a></li>
                                    <li><a href="#">Help</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-4 col-lg-2 -->
                    </div><!-- End .row -->
                </div><!-- End .col-lg-6 col-xl-7 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .footer-middle -->
    
    <div class="footer-bottom">
        <div class="container">
            <p class="footer-copyright" style="margin-top:6px">Copyright © 2024 Cycular. All Rights Reserved.</p><!-- End .footer-copyright -->
            <ul class="footer-menu">
                <li><a href="#">Terms Of Use</a></li>
                <li><a href="#">Privacy Policy</a></li>
            </ul><!-- End .footer-menu -->
    
            <div class="social-icons ">
                <span class="social-label">Social Media</span>
             
                    <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
                    <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
                    <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
                    <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
                    <a href="#" class="social-icon" target="_blank" title="Pinterest"><i class="icon-pinterest"></i></a>
    
            </div><!-- End .soial-icons -->
        </div><!-- End .container -->
    </div><!-- End .footer-bottom -->
    </footer><!-- End .footer -->
    
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

   


    <!-- Plugins JS File -->
    <script src="{% static 'assets/js/jquery.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'assets/js/jquery.hoverIntent.min.js' %}"></script>
    <script src="{% static 'assets/js/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'assets/js/superfish.min.js' %}"></script>
    <script src="{% static 'assets/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'assets/js/wNumb.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap-input-spinner.js' %}"></script>
    <script src="{% static 'assets/js/jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'assets/js/nouislider.min.js' %}"></script>
    <!-- Main JS File -->
    <script src="{% static 'assets/js/main.js' %}"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Function to update cart count
        function updateCartCount() {
            fetch('{% url "cart:cart-count" %}', {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': '{{ csrf_token }}'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    document.querySelector('.cart-count').textContent = data.count;
                } else {
                    console.error('Failed to fetch cart count:', data.message);
                }
            })
            .catch(error => console.error('Error:', error));
        }

        // Call the updateCartCount function when the page loads
        document.addEventListener('DOMContentLoaded', updateCartCount);

    </script>
    <!-- script for find the wish list count -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Function to fetch the wishlist count from the server
            function updateWishlistCount() {
                fetch("{% url 'wishlist:wishlist-count' %}", {
                    method: "GET",
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest',  // This makes it an AJAX request
                    }
                })
                .then(response => response.json())
                .then(data => {
                    // Update the wishlist count on the page
                    const wishlistCountElement = document.querySelector('.wishlist-count');
                    wishlistCountElement.textContent = data.count;
                })
                .catch(error => console.error('Error fetching wishlist count:', error));
            }
        
            // Call the function once the page loads
            updateWishlistCount();
        });
    </script>

    <script>
        // Common SweetAlert function
        function showAlert(title, message, icon = 'info', buttonText = 'OK') {
            swal.fire({
                title: title,
                text: message,
                icon: icon, // can be 'success', 'error', 'warning', or 'info'
                confirmButtonText: buttonText,
            });
        }

        // Function to update the button state and style
        function updateButtonState(button, isAdded) {
            if (isAdded) {
                button.textContent = 'Remove from Cart'; // Change text to "Remove from Cart"
                button.style.backgroundColor = 'grey'; // Change button color to grey
                button.style.color = 'white'; // Set text color to white for better contrast
            } else {
                button.textContent = 'Add to Cart';
                button.style.backgroundColor = ''; // Reset to default color
                button.style.color = ''; // Reset text color
            }
        }
        function addToCart(button){
            const productId=button.getAttribute('data-product-id');

            // Check if button is already in "Added to Cart" state
            const isAlreadyAdded = button.textContent === 'Remove from Cart';

            // Toggle state based on the current state
            const action = isAlreadyAdded ? 'remove' : 'add';

            fetch('{% url "cart:add-to-cart" %}',{
                method:'POST',
                headers:{
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: new URLSearchParams({
                    'product_variant_id': productId,
                    'action': action 
                })
            })
            .then(response => {
                if (response.status === 401) {
                    // User is not logged in
                    return response.json().then(data => {
                        showAlert('Login Required', data.message, 'warning', 'OK');
                        throw new Error('Unauthorized'); // Stop further processing
                    });
                } else if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Unexpected response');
                }
            })
        
            .then(data => {
                if (data.status === 'success') {
                    updateButtonState(button, action === 'add');
                    showAlert('Success!', data.message, 'success','OK'); // Show success message
                    updateCartCount();
                } else {
                    showAlert('Notice', data.message || 'An error occurred. Please try again.', 'info','OK'); 
                }
            })
            .catch(error => {
                console.error('Error:', error);
                if (error.message !== 'Unauthorized') {
                    showAlert('Error', 'An error occurred. Please try again.', 'error', 'OK');
                }
            });
        }
    </script>
    <!-- add to wishlist  -->
    <script>
        $(document).on("click", ".add-to-wishlist", function() {
            let product_variant_id = $(this).attr("data-product-item");
            let this_val = $(this);
        
            // Check if the button says "Go to wishlist"
            if (this_val.text().trim() === "Go to wishlist") {
                // Redirect to the wishlist page
                window.location.href = "/wishlist/";  // Replace with your actual wishlist URL
                return;
            }
        
            // Perform the AJAX call if the product is not yet added to wishlist
            $.ajax({
                url: "/wishlist/add-to-wishlist",
                data: { 
                    "id": product_variant_id 
                },
                dataType: "json",
                beforeSend: function() {
                    console.log("Adding to wishlist...");
                },
                success: function(response) {
                    if (response.bool === true) {
                        // Change button text to "Go to wishlist"
                        this_val.html("Go to wishlist");
        
                        // SweetAlert for success
                        Swal.fire({
                            title: 'Added to Wishlist',
                            text: response.message,  // Message from server
                            icon: 'success',
                            confirmButtonText: 'Ok'
                        });
                    } else {
                        // SweetAlert for login required
                        Swal.fire({
                            title: 'Login Required',
                            text: response.message,  // Message from server
                            icon: 'info',  // 'info' or 'error'
                            confirmButtonText: 'Login',
                            preConfirm: function() {
                                window.location.href = "{% url 'user_side:sign-in' %}" ;  // Redirect to login page
                            }
                        });
                    }
                },
                error: function() {
                    // SweetAlert for general error
                    Swal.fire({
                        title: 'Error!',
                        text: 'Something went wrong. Please try again later.',
                        icon: 'error',
                        confirmButtonText: 'Ok'
                    });
                }
            });
        });
    </script>
         
    <script>
        // JavaScript to handle the Clean All button click event
        document.addEventListener('DOMContentLoaded', function() {
            const cleanAllButton = document.getElementById('clean-all-button');
            
            cleanAllButton.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default link behavior
                
                // Get the base URL without query parameters
                const baseUrl = window.location.origin + window.location.pathname;
                
                // Redirect to the base URL to clear all filters
                window.location.href = baseUrl;
            });
        });
    </script>
        
</body>


<!-- molla/category-4cols.html  22 Nov 2019 10:02:55 GMT -->
</html>